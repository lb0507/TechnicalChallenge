@rendermode InteractiveServer
@using DataLibrary
@using DataLibrary.Models
@inject IUserData _user
@inject IConfiguration _config
@inject NavigationManager nav

<div container>

    Signed in as: @displayName <button class="btn btn-link" @onclick="SignOut">Sign Out</button> <button class="dashboard" @onclick="GoToHome">Dashboard</button>
    
 
</div>



@code {
    private UserModel currentUser = new();
    private String displayName = "";
    
    public void SignOut()
    {
        Console.WriteLine("Signing out...");
        _user.SignOutUser();
        nav.NavigateTo("/signin");
    }
    public void GoToHome()
    {
        Console.WriteLine("Navigating to Home Page...");
        nav.NavigateTo("/");
    }
    protected override async Task OnInitializedAsync()
    {

        try
        { 
            currentUser = _user.GetUserSignOnInfo();
            if (currentUser != null)
            {
                displayName = currentUser.FirstName + " " + currentUser.LastName;
            }
            
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
}
